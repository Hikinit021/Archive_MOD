#####################

###  ##  #  # # #  ## 
 #  #  # ## # # # #   
 #  #### # ## ##   #  
 #  #  # #  # # #   # 
 #  #  # #  # # # ## 

 #################### 

NOR_thunes_mekaniske_verksted_organization = {
    include = generic_infantry_tank_organization
    icon = GFX_idea_NOR_thunes_mekaniske_vaerksted
    allowed = { 
		OR = {
			tag = RED
			tag = NOR
		}
        has_dlc = "Arms Against Tyranny"
    }

    equipment_type = {  
        armor
        train_equipment
    }

    research_categories = { 
        armor
        train_tech
    }

    initial_trait = {
        name = NOR_mio_initial_trait_mechanical_workshop
        
        limit_to_equipment_type = { 
            train_equipment
        }
        equipment_bonus = {
            build_cost_ic = -0.07
            armor_value = 0.02
        }
    }
}

#####################

 ## #  # ### ###   ## 
#   #  #  #  #  # #   
 #  ####  #  ###   #  
  # #  #  #  #      # 
##  #  # ### #    ##  
 
#####################

DEN_orlogsvaerftet_organization = {
    include = generic_raider_ship_organization
    icon = GFX_idea_DEN_orlogsvaerftet_organization
    allowed = { 
        OR = {
			tag = RED
			tag = DEN
		}
        has_dlc = "Arms Against Tyranny"
    }

    tree_header_text = {
        text = mio_header_long_range_focus
        x = 1
    }

    tree_header_text = {
        text = mio_header_high_speed_focus
        x = 5
    }

    tree_header_text = {
        text = mio_header_production
        x = 7.5
    }

    override_trait = {
        token = generic_mio_trait_high_speed_raiding
        position = { x=4 y=0 }
    }

    override_trait = {
        token = generic_mio_trait_raiding_capital_ships
        position = { x=0 y=2 }
    }

    override_trait = {
        token = generic_mio_trait_raider_escort_requirements
        position = { x=0 y=1 }
    }

    override_trait = {
        token = generic_mio_trait_unescorted_raider_requirements
        position = { x=2 y=1 }
    }

    override_trait = {
        token = generic_mio_trait_raiding_cruisers
        position = { x=-2 y=2 }
    }

}

DEN_burmeister_wain_organization = {
    include = generic_task_force_ship_organization
    icon = GFX_idea_DEN_burmeister_wain_organization
    allowed = { 
        OR = {
			tag = RED
			tag = DEN
		}
        has_dlc = "Arms Against Tyranny"
    } 

    tree_header_text = {
        text = mio_header_systems
        x = 1
    }

    tree_header_text = {
        text = mio_header_weapons
        x = 4
    }

    tree_header_text = {
        text = mio_header_production
        x = 7.5
    }

    override_trait = {
        token = generic_mio_trait_secondary_fire_director_control
        position = { x=4 y=0 }
    }

    override_trait = {
        token = generic_mio_trait_primary_fire_director_control
        position = { x=2 y=0 }
    }

}

SWE_kockums_organization = {
	include = generic_raider_ship_organization
	icon = GFX_idea_SWE_kockums
	allowed = {
		OR = {
			tag = RED
			tag = SWE
		}
	}
}

SWE_gotaverken_organization = {
	include = generic_battle_line_ship_organization
	icon = GFX_idea_SWE_gotaverken
	allowed = {
		OR = {
			tag = RED
			tag = SWE
		}
	}

}

NOR_karljohansvern_verft_organization = {
    include = generic_battle_line_ship_organization
    icon = GFX_idea_NOR_karljohansvern_verft
    allowed = { 
        OR = {
			tag = RED
			tag = NOR
		}
        has_dlc = "Arms Against Tyranny"
    } 
}

###########################

###  #    ##  #  # ###  ## 
#  # #   #  # ## # #   #   
###  #   #### # ## ##   #  
#    #   #  # #  # #     # 
#    ### #  # #  # ### ##  

###########################

DEN_flyvertroppernes_organization = {
    include = generic_multi_role_aircraft_organization
    icon = GFX_idea_DEN_flyvertroppernes_organization
    allowed = { 
        OR = {
			tag = RED
			tag = DEN
		}
        has_dlc = "Arms Against Tyranny"
    } 

    tree_header_text = {
        text = mio_header_light_aircraft
        x = 2
    }

    tree_header_text = {
        text = mio_header_medium_aircraft
        x = 6
    }

    tree_header_text = {
        text = mio_header_equipment_and_specialization
        x = 4
    }

    override_trait = {
        token = generic_mio_trait_armored_cockpit
        position = { x=2 y=0 }
    }

    override_trait = {
        token = generic_mio_trait_escort_designs
        position = { x=4 y=0 }
    }

    override_trait = {
        token = generic_mio_trait_not_enough_guns_never_enough_guns
        position = { x=2 y=0 }
    }

}

DEN_flyvemaskinevaerksted_organization = {
    include = generic_naval_aircraft_organization
    icon = GFX_idea_DEN_flyvemaskinevaerksted_organization
    allowed = { 
        OR = {
			tag = RED
			tag = DEN
		}
        has_dlc = "Arms Against Tyranny"
    } 

    override_trait = {
        token = generic_mio_trait_internal_torpedo_mountings
        position = { x=1 y=0 }
    }
}

SWE_saab_organization = {
	include = generic_light_aircraft_organization
	icon = GFX_idea_SWE_saab
	allowed = { 
		OR = {
			tag = RED
			tag = SWE
		}
	}

	initial_trait = {
		name = generic_mio_initial_trait_standardized_production
		
		organization_modifier = {
			military_industrial_organization_research_bonus = 0.1
		}	
		production_bonus = {
			production_cost_factor = -0.1
		}
	}

	trait = {
		token = SWE_mio_trait_forefront_of_aeroplane_development
		name = SWE_mio_trait_forefront_of_aeroplane_development
		icon = GFX_generic_mio_department_icon_plane_fighter_quality

		relative_position_id = generic_mio_trait_removable_wings
		all_parents = { generic_mio_trait_removable_wings }
		special_trait_background  = yes
		position = { x=0 y=1 }

		production_bonus = {
			production_cost_factor = 0.03
			production_resource_need_factor = -0.1
		}
		equipment_bonus = {
			fuel_consumption = -0.03
			air_range = 0.08
			air_agility = 0.03
			air_defence = 0.05
		}
	}
}

SWE_husqvarna_organization = {
		include = generic_infantry_equipment_organization
		icon = GFX_idea_SWE_husqvarna
		allowed = {
			OR = {
				tag = RED
				tag = SWE
			}
		}
}

NOR_marinens_flyvebaatfabrikk_organization = {
    include = generic_naval_aircraft_organization
    icon = GFX_idea_NOR_marinens_flyvebaatfabrikk
    allowed = { 
        OR = {
			tag = RED
			tag = NOR
		}
        has_dlc = "Arms Against Tyranny"
    }

    initial_trait = {
        equipment_bonus = {
            naval_strike_attack = 0.07
        }
    }

}

################################### 

#   #  ##  ### ### ###  ### ### #   
## ## #  #  #  #   #  #  #  #   #   
# # # ####  #  ##  ###   #  ##  #   
#   # #  #  #  #   #  #  #  #   #   
#   # #  #  #  ### #  # ### ### ### 


###################################

DEN_DISA_organization = {
    include = generic_infantry_equipment_organization
    icon = GFX_idea_DEN_DISA_organization
    allowed = { 
        OR = {
			tag = RED
			tag = DEN
		}
        has_dlc = "Arms Against Tyranny"
    }  

}

DEN_haerens_tekniske_korps_organization = {
    include = generic_artillery_organization
    icon = GFX_idea_DEN_haerens_tekniske_korps_organization
    allowed = { 
        OR = {
			tag = RED
			tag = DEN
		}
        has_dlc = "Arms Against Tyranny"
    }  

    override_trait = {
        token = generic_mio_trait_improved_hydraulic_recoil_system
        position = { x=1 y=2 }
    }

    override_trait = {
        token = generic_mio_trait_improved_direct_fire_targeting
        position = { x=-1 y=2 }
    }

    override_trait = {
        token = generic_mio_trait_rapid_fire
        name = DEN_mio_trait_fodfolkskanoner
        icon = GFX_generic_mio_department_icon_tank_general_weapons
        special_trait_background = yes

        position = { x=4 y=0 }
        equipment_bonus = {
            soft_attack = 0.1
            breakthrough = 0.05
            reliability = 0.03
        }
    }

    override_trait = {
        token = generic_mio_trait_sliding_breech_block
        special_trait_background = yes

        position = { x=0 y=3 }
        all_parents = {
            generic_mio_trait_rapid_fire
        }

        equipment_bonus = {
            soft_attack = 0.03
            defense = 0.03
        }
    }

    override_trait = {
        token = generic_mio_trait_gun_mass_production
        special_trait_background = yes

        position = { x=2 y=1 }
        relative_position_id = generic_mio_trait_rapid_fire

        any_parent = {
            generic_mio_trait_rapid_fire
            generic_mio_trait_big_guns
        }

        production_bonus = {
            production_efficiency_gain_factor = 0.05
            production_efficiency_cap_factor = 0.05
        }
    }

     override_trait = {
        token = generic_mio_trait_big_guns
        name = DEN_mio_trait_feltkanoner
        icon = GFX_generic_mio_department_icon_artillery_production
        special_trait_background = yes

        position = { x=4 y=0 }
        relative_position_id = generic_mio_trait_rapid_fire

        equipment_bonus = {
            soft_attack = 0.02
            defense = 0.02
        }
    }

    override_trait = {
        token = generic_mio_trait_light_weight_barrels
        icon = GFX_generic_mio_department_icon_tank_general_weapons
        special_trait_background = yes

        position = { x=2 y=4 }
        relative_position_id = generic_mio_trait_rapid_fire
        
        any_parent = {
            DEN_mio_trait_madsen_20_mm
            DEN_mio_trait_big_guns
        }
        all_parents = {
           generic_mio_trait_sliding_breech_block
           DEN_mio_trait_advanced_barrel_forging
        }

        production_bonus = {
            production_cost_factor = -0.05
        }

        equipment_bonus = {
            breakthrough = 0.06
            defense = 0.1
        }
    }

    remove_trait = {
        generic_mio_trait_advanced_barrel_forging
        generic_mio_trait_super_charges
    }
   
}

DEN_triangel_organization = {
    include = generic_motorized_mechanized_organization
    icon = GFX_idea_DEN_triangel_organization
    allowed = { 
        OR = {
			tag = RED
			tag = DEN
		}
        has_dlc = "Arms Against Tyranny"  
    }  

    tree_header_text = {
        text = mio_header_motorized
        x = 1
    }

    tree_header_text = {
        text = mio_header_mechanized
        x = 6
    }

    tree_header_text = {
        text = mio_header_production_department
        x = 8.5
    }

    override_trait = {
        token = generic_mio_trait_steel_cargo_bed

        position = { x=2 y=0 }
        relative_position_id = generic_mio_trait_composite_cargo_bed
    }

    override_trait = {
        token = generic_mio_trait_high_powered_engine

        position = { x=1 y=0 }
        relative_position_id = generic_mio_trait_attached_wood_gas_generator
    }

    override_trait = {
        token = generic_mio_trait_medium_machinegun_mounts

        position = { x=1 y=0 }
        relative_position_id = generic_mio_trait_steel_cargo_bed
    }

    override_trait = {
        token = generic_mio_trait_advanced_artillery_racks

        position = { x=0 y=2 }
        relative_position_id = generic_mio_trait_armored_pulpit_mount
    }

    override_trait = {
        token = generic_mio_trait_heavy_machinegun_mount

        position = { x=1 y=0 }
        relative_position_id = generic_mio_trait_advanced_artillery_racks
    }

    override_trait = {
        token = generic_mio_trait_open_chassi

        position = { x=2 y=0 }
        relative_position_id = generic_mio_trait_medium_machinegun_mounts
    }
    
    override_trait = {
        token = generic_mio_trait_land_mine_racks

        position = { x=1 y=0 }
        relative_position_id = generic_mio_trait_light_flame_projectors
    }

}

SWE_scania_vabis_organization = {
	include = generic_armored_car_organization
	icon = GFX_idea_scania
	allowed = { 
		OR = {
			tag = RED
			tag = SWE
		}
		has_dlc = "La Resistance"
	}	
}

NOR_raufoss_ammunisjonsfabrikker_organization = {
    include = generic_artillery_organization
    icon = GFX_idea_NOR_raufoss_ammunisjonsfabrikker
    allowed = { 
        OR = {
			tag = RED
			tag = NOR
		}
        has_dlc = "Arms Against Tyranny"
    }  

}

NOR_kongsberg_vaapenfabrikk_organization = {
    include = generic_infantry_equipment_organization
    icon = GFX_idea_NOR_kongsberg_vaapenfabrikk
    allowed = { 
        OR = {
			tag = RED
			tag = NOR
		}
        has_dlc = "Arms Against Tyranny"
    }
    initial_trait = {
        
        production_bonus = {
            production_efficiency_cap_factor = 0.03
            production_resource_need_factor = -0.05
        }

        equipment_bonus = {
            soft_attack = 0.03
            breakthrough = 0.02
        }
    }
}

NOR_norsk_spraengstofindustri_organization = {
    include = generic_support_equipment_organization
    icon = GFX_idea_NOR_norsk_Spraengstofindustri
    allowed = { 
        OR = {
			tag = RED
			tag = NOR
		}
        has_dlc = "Arms Against Tyranny"  
    }  
}